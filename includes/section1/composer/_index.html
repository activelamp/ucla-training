<section>
    <h1>Composer</h1>
    <em class="fragment">Dependency Manager</em>
</section>

<section>
    <h2>Application Dependencies</h2>
    <img data-src="img/Dependency-Tree.png" class="no-border">
    <aside class="notes">
        <ul>
            <li>Your application code should only contain your code</li>
            <li>Dependent libraries should not be committed in your code</li>
            <li>Most languages have a dependency manager... Gems, npm packages, composer packages, etc...</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Dependency Manifest</h2>
    <em class="fragment">composer.json</em>
</section>

<section>
    <img data-src="img/composer-json.png" class="no-border">
    <aside class="notes">
        <ul>
            <li>All dependencies in a manifest file</li>
            <li>Control the version of the dependency in the manifest</li>
            <li>Upgrading dependencies is very simple</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Drupal Composer Template</h2>
    <a class="fragment" href="https://github.com/drupal-composer/drupal-project">https://github.com/drupal-composer/drupal-project</a>
    <aside class="notes">
        <ul>
            <li>Click the link and review the README</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Create Drupal build</h2>
    <pre><code data-trim contenteditable class="bash" style="min-height: 100px">
$ composer create-project drupal-composer/drupal-project:8.x-dev gcr --stability dev --no-interaction
$ cd gcr
$ composer require drupal/devel:~1.0
	</code></pre>
</section>

<section>
    <h2>What does the template do?</h2>
    <a class="fragment" href="https://github.com/drupal-composer/drupal-project#what-does-the-template-do">https://github.com/drupal-composer/drupal-project#what-does-the-template-do</a>
    <aside class="notes">
        <ul>
            <li>Click the link and read through the docs with the class.</li>
            <li>Open the directory in PHPStorm and show Drupal dir and vendor dir.</li>
            <li>Run `fin config`</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Run this with Docksal</h2>
    <ul>
        <li>Add the .docksal directory</li>
        <li class="fragment">Configure Docksal to read <em>web</em> directory</li>
        <li class="fragment">Boot Docksal</li>
    </ul>
    <pre class="fragment"><code data-trim contenteditable class="bash" style="min-height: 100px">
# Start the containers.
$ fin up
    </code></pre>
    <aside class="notes">
        <ul>
            <li>Create docksal.env file and add DOCROOT variable</li>
            <li>Show the stack file in ~/.docksal/stacks folder and ENV vars</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Finish installing Drupal</h2>
    <ul>
        <li>Visit the new site: <a href="http://gcr.docksal">http://gcr.docksal</a></li>
        <li class="fragment">Install Drupal via the UI</li>
    </ul>
    <aside class="notes">
        <ul>
            <li>Show the docker-compose file for default configuration... DB creds</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Install Drupal with CLI</h2>
    <pre class="fragment"><code data-trim contenteditable class="bash" style="min-height: 100px">
# Drop the current database
$ fin drush sql-drop --root=/var/www/web

# Install drupal with one command
$ fin drush si --yes --root=/var/www/web
    </code></pre>
    <p class="fragment">Note: This is factor 12</p>
    <aside class="notes">
        <ul>
            <li>Factor 12</li>
            <li>This command uses the CLI container to run command</li>
            <li>You don't need the CLI tools in the web container</li>
        </ul>
    </aside>
</section>

<section>
    <h2>Review</h2>
    <pre class="fragment"><code data-trim contenteditable class="bash" style="min-height: 100px">
$ composer create-project drupal-composer/drupal-project:8.x-dev gcr --stability dev --no-interaction

$ cd gcr

$ mkdir .docksal

$ echo DOCROOT=web > .docksal/docksal.env

$ fin up

$ fin drush si --db-url=mysql://user:user@db/default --site-name="Drupal 8 Training" --root=/var/www/web

$ open http://gcr.docksal

    </code></pre>
</section>

<section>
    <h1>Questions?</h1>
</section>

<section>
    <h1>Break!</h1>
    <h3>(15 minutes)</h3>
</section>